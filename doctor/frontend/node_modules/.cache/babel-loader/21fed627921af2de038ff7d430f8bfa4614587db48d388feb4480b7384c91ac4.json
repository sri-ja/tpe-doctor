{"ast":null,"code":"var _jsxFileName = \"/home/shambhavi/Documents/4-2/tpe/app/tpe-doctor/src/PatientDetails/components/PatientDashboard/PatientStats.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\n\n// 1. Type getProgressBadgeStyle parameter\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getProgressBadgeStyle = level => {\n  switch (level === null || level === void 0 ? void 0 : level.toLowerCase()) {\n    case 'low':\n      return \"bg-red-100 text-red-700\";\n    case 'medium':\n      return \"bg-yellow-100 text-yellow-800\";\n    // Adjusted yellow for better contrast\n    case 'high':\n      return \"bg-green-100 text-green-700\";\n    default:\n      return \"bg-gray-100 text-gray-600\";\n    // Default/fallback style\n  }\n};\n\n// 2. Define Props for StatCard and type it\n\nconst StatCard = ({\n  label,\n  value,\n  type = \"text\"\n}) => {\n  const isBadge = type === \"badge\";\n  // Pass value directly to getProgressBadgeStyle\n  const badgeStyle = isBadge ? getProgressBadgeStyle(value) : \"\";\n  return (\n    /*#__PURE__*/\n    // Standardized styling\n    _jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 rounded-lg border border-gray-200\" // Adjusted padding, background, border\n      ,\n      role: \"group\",\n      \"aria-label\": label,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm font-medium text-gray-500 mb-1\",\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 7\n      }, this), isBadge ?\n      /*#__PURE__*/\n      // Standardized badge styling\n      _jsxDEV(\"span\", {\n        className: `inline-block px-2.5 py-0.5 text-xs font-semibold rounded-full ${badgeStyle}`,\n        children: value || 'N/A'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this) :\n      /*#__PURE__*/\n      // Standardized text style\n      _jsxDEV(\"p\", {\n        className: \"text-base font-semibold text-gray-800\",\n        children: value || 'N/A'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n// 3. Define Props for PatientStats and type it\n_c = StatCard;\nconst PatientStats = ({\n  age,\n  patientId,\n  progressLevel\n}) => {\n  _s();\n  const [treatmentStart, setTreatmentStart] = useState('N/A');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchTreatmentStart = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/prescriptions/patient/${patientId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch prescriptions');\n        }\n        const prescriptions = await response.json();\n\n        // Find earliest prescription date\n        const earliestDate = prescriptions.reduce((earliest, p) => {\n          const date = new Date(p.createdDate);\n          return earliest === null || date < earliest ? date : earliest;\n        }, null);\n        setTreatmentStart(earliestDate ? earliestDate.toLocaleDateString() : 'N/A');\n      } catch (err) {\n        console.error('Failed to fetch treatment start date:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (patientId) {\n      fetchTreatmentStart();\n    }\n  }, [patientId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-1 sm:grid-cols-3 gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(StatCard, {\n      label: \"Age\",\n      value: age\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n      label: \"Treatment Start\",\n      value: treatmentStart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n      label: \"Progress Level\",\n      value: progressLevel,\n      type: \"badge\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(PatientStats, \"nmxFLAcvM0s9UlcNxVzvTpGTyNU=\");\n_c2 = PatientStats;\nexport default PatientStats;\nvar _c, _c2;\n$RefreshReg$(_c, \"StatCard\");\n$RefreshReg$(_c2, \"PatientStats\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","getProgressBadgeStyle","level","toLowerCase","StatCard","label","value","type","isBadge","badgeStyle","className","role","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","PatientStats","age","patientId","progressLevel","_s","treatmentStart","setTreatmentStart","loading","setLoading","fetchTreatmentStart","response","fetch","API_BASE_URL","ok","Error","prescriptions","json","earliestDate","reduce","earliest","p","date","Date","createdDate","toLocaleDateString","err","console","error","_c2","$RefreshReg$"],"sources":["/home/shambhavi/Documents/4-2/tpe/app/tpe-doctor/src/PatientDetails/components/PatientDashboard/PatientStats.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n// 1. Type getProgressBadgeStyle parameter\nconst getProgressBadgeStyle = (level: string | undefined | null): string => {\n  switch (level?.toLowerCase()) {\n    case 'low':\n      return \"bg-red-100 text-red-700\";\n    case 'medium':\n      return \"bg-yellow-100 text-yellow-800\"; // Adjusted yellow for better contrast\n    case 'high':\n      return \"bg-green-100 text-green-700\";\n    default:\n      return \"bg-gray-100 text-gray-600\"; // Default/fallback style\n  }\n};\n\n// 2. Define Props for StatCard and type it\ninterface StatCardProps {\n  label: string;\n  value: string | undefined | null; // Value can be string, undefined, or null\n  type?: \"text\" | \"badge\"; // Type can be 'text' or 'badge'\n}\n\nconst StatCard: React.FC<StatCardProps> = ({ label, value, type = \"text\" }) => {\n  const isBadge = type === \"badge\";\n  // Pass value directly to getProgressBadgeStyle\n  const badgeStyle = isBadge ? getProgressBadgeStyle(value) : \"\";\n\n  return (\n    // Standardized styling\n    <div\n      className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\" // Adjusted padding, background, border\n      role=\"group\"\n      aria-label={label}\n    >\n      {/* Standardized text styles */}\n      <p className=\"text-sm font-medium text-gray-500 mb-1\">{label}</p>\n      {isBadge ? (\n        // Standardized badge styling\n        <span className={`inline-block px-2.5 py-0.5 text-xs font-semibold rounded-full ${badgeStyle}`}>\n          {value || 'N/A'}\n        </span>\n      ) : (\n        // Standardized text style\n        <p className=\"text-base font-semibold text-gray-800\">{value || 'N/A'}</p>\n      )}\n    </div>\n  );\n};\n\n// 3. Define Props for PatientStats and type it\ninterface PatientStatsProps {\n  age: string;\n  patientId: string;\n  progressLevel: string; // Consider specific types like 'low' | 'medium' | 'high' if applicable\n}\n\nconst PatientStats: React.FC<PatientStatsProps> = ({ age, patientId, progressLevel }) => {\n  const [treatmentStart, setTreatmentStart] = useState<string>('N/A');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchTreatmentStart = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/prescriptions/patient/${patientId}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch prescriptions');\n        }\n        const prescriptions = await response.json();\n        \n        // Find earliest prescription date\n        const earliestDate = prescriptions.reduce((earliest: Date | null, p: any) => {\n          const date = new Date(p.createdDate);\n          return earliest === null || date < earliest ? date : earliest;\n        }, null);\n\n        setTreatmentStart(earliestDate ? earliestDate.toLocaleDateString() : 'N/A');\n      } catch (err) {\n        console.error('Failed to fetch treatment start date:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (patientId) {\n      fetchTreatmentStart();\n    }\n  }, [patientId]);\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n      <StatCard label=\"Age\" value={age} />\n      <StatCard label=\"Treatment Start\" value={treatmentStart} />\n      <StatCard label=\"Progress Level\" value={progressLevel} type=\"badge\" />\n    </div>\n  );\n};\n\nexport default PatientStats;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;;AAElD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,qBAAqB,GAAIC,KAAgC,IAAa;EAC1E,QAAQA,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEC,WAAW,CAAC,CAAC;IAC1B,KAAK,KAAK;MACR,OAAO,yBAAyB;IAClC,KAAK,QAAQ;MACX,OAAO,+BAA+B;IAAE;IAC1C,KAAK,MAAM;MACT,OAAO,6BAA6B;IACtC;MACE,OAAO,2BAA2B;IAAE;EACxC;AACF,CAAC;;AAED;;AAOA,MAAMC,QAAiC,GAAGA,CAAC;EAAEC,KAAK;EAAEC,KAAK;EAAEC,IAAI,GAAG;AAAO,CAAC,KAAK;EAC7E,MAAMC,OAAO,GAAGD,IAAI,KAAK,OAAO;EAChC;EACA,MAAME,UAAU,GAAGD,OAAO,GAAGP,qBAAqB,CAACK,KAAK,CAAC,GAAG,EAAE;EAE9D;IAAA;IACE;IACAN,OAAA;MACEU,SAAS,EAAC,kDAAkD,CAAC;MAAA;MAC7DC,IAAI,EAAC,OAAO;MACZ,cAAYN,KAAM;MAAAO,QAAA,gBAGlBZ,OAAA;QAAGU,SAAS,EAAC,wCAAwC;QAAAE,QAAA,EAAEP;MAAK;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAChER,OAAO;MAAA;MACN;MACAR,OAAA;QAAMU,SAAS,EAAE,iEAAiED,UAAU,EAAG;QAAAG,QAAA,EAC5FN,KAAK,IAAI;MAAK;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC;MAAA;MAEP;MACAhB,OAAA;QAAGU,SAAS,EAAC,uCAAuC;QAAAE,QAAA,EAAEN,KAAK,IAAI;MAAK;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CACzE;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;AAEV,CAAC;;AAED;AAAAC,EAAA,GA3BMb,QAAiC;AAkCvC,MAAMc,YAAyC,GAAGA,CAAC;EAAEC,GAAG;EAAEC,SAAS;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EACvF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAG3B,QAAQ,CAAS,KAAK,CAAC;EACnE,MAAM,CAAC4B,OAAO,EAAEC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACd,MAAM6B,mBAAmB,GAAG,MAAAA,CAAA,KAAY;MACtC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGC,YAAY,8BAA8BV,SAAS,EAAE,CAAC;QACtF,IAAI,CAACQ,QAAQ,CAACG,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,+BAA+B,CAAC;QAClD;QACA,MAAMC,aAAa,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;;QAE3C;QACA,MAAMC,YAAY,GAAGF,aAAa,CAACG,MAAM,CAAC,CAACC,QAAqB,EAAEC,CAAM,KAAK;UAC3E,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,CAAC,CAACG,WAAW,CAAC;UACpC,OAAOJ,QAAQ,KAAK,IAAI,IAAIE,IAAI,GAAGF,QAAQ,GAAGE,IAAI,GAAGF,QAAQ;QAC/D,CAAC,EAAE,IAAI,CAAC;QAERb,iBAAiB,CAACW,YAAY,GAAGA,YAAY,CAACO,kBAAkB,CAAC,CAAC,GAAG,KAAK,CAAC;MAC7E,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,uCAAuC,EAAEF,GAAG,CAAC;MAC7D,CAAC,SAAS;QACRjB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAED,IAAIN,SAAS,EAAE;MACbO,mBAAmB,CAAC,CAAC;IACvB;EACF,CAAC,EAAE,CAACP,SAAS,CAAC,CAAC;EAEf,oBACEpB,OAAA;IAAKU,SAAS,EAAC,uCAAuC;IAAAE,QAAA,gBACpDZ,OAAA,CAACI,QAAQ;MAACC,KAAK,EAAC,KAAK;MAACC,KAAK,EAAEa;IAAI;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpChB,OAAA,CAACI,QAAQ;MAACC,KAAK,EAAC,iBAAiB;MAACC,KAAK,EAAEiB;IAAe;MAAAV,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC3DhB,OAAA,CAACI,QAAQ;MAACC,KAAK,EAAC,gBAAgB;MAACC,KAAK,EAAEe,aAAc;MAACd,IAAI,EAAC;IAAO;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnE,CAAC;AAEV,CAAC;AAACM,EAAA,CAvCIJ,YAAyC;AAAA4B,GAAA,GAAzC5B,YAAyC;AAyC/C,eAAeA,YAAY;AAAC,IAAAD,EAAA,EAAA6B,GAAA;AAAAC,YAAA,CAAA9B,EAAA;AAAA8B,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}